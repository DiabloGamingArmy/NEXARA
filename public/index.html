<!DOCTYPE html>
<!-- UI-only: sidebar scrollbars, inbox content filters, video modal mounting, profile cover UI. -->
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="grammarly-disable" content="true">
    <title>Nexera Feed</title>
    <!-- codex connection successful. -->
    <!-- Tailwind for utilities -->
    <link rel="stylesheet" href="/assets/tailwind.css">
    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <!-- MOD: Sanitizer (use in script.js to safely render user content) -->
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.11/dist/purify.min.js"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="/stylemobile.css">
    <link rel="icon"
        href="https://firebasestorage.googleapis.com/v0/b/spike-streaming-service.firebasestorage.app/o/apps%2Fnexera%2Fassets%2Ficons%2Ficon.png?alt=media&token=3db62710-7412-46bf-a981-ace4715e2bc6">
    <link rel="shortcut icon"
        href="https://firebasestorage.googleapis.com/v0/b/spike-streaming-service.firebasestorage.app/o/apps%2Fnexera%2Fassets%2Ficons%2Ficon.png?alt=media&token=3db62710-7412-46bf-a981-ace4715e2bc6">
    <link rel="apple-touch-icon"
        href="https://firebasestorage.googleapis.com/v0/b/spike-streaming-service.firebasestorage.app/o/apps%2Fnexera%2Fassets%2Ficons%2Ficon.png?alt=media&token=3db62710-7412-46bf-a981-ace4715e2bc6">
</head>

<body data-gramm="false">

    <!-- Loading -->
    <div id="loading-overlay"><img class="brand-logo brand-logo-splash" data-logo-variant="auto" alt="Nexera logo"
            src="https://firebasestorage.googleapis.com/v0/b/spike-streaming-service.firebasestorage.app/o/apps%2Fnexera%2Fassets%2Ficons%2Ficon.png?alt=media&token=3db62710-7412-46bf-a981-ace4715e2bc6">
        <div style="color:var(--text-muted);">Initializing Nexera...</div>
    </div>

    <!-- Auth -->
    <div id="auth-screen">
        <img class="brand-logo brand-logo-auth" data-logo-variant="dark" alt="Nexera logo"
            src="https://firebasestorage.googleapis.com/v0/b/spike-streaming-service.firebasestorage.app/o/apps%2Fnexera%2Fassets%2Ficons%2Fwhiteicon.png?alt=media&token=366d09a9-61f6-4096-af08-a01a119c339e">
        <div class="auth-box">
            <h2 class="nexera-gradient-text"
                style="margin-bottom:1rem; font-weight:800; font-size:2rem; letter-spacing: -0.5px;">Greetings,
                Traveler.</h2>
            <p style="color:var(--text-muted); margin-bottom: 1.5rem;">Welcome to Nexera!</p>
            <input type="email" id="email" class="form-input" placeholder="Email">
            <input type="password" id="password" class="form-input" placeholder="Password">
            <div id="auth-error" style="color:#ff3d3d; font-size:0.8rem; margin:5px 0;"></div>
            <button id="login-submit" onclick="window.handleLogin(event)" class="create-btn-sidebar"
                style="background: var(--primary); color:black;">Log In</button>
            <button id="signup-submit" onclick="window.handleSignup(event)" class="create-btn-sidebar"
                style="background:transparent; border:1px solid var(--border); color:var(--text-main); margin-top:10px;">Sign
                Up</button>
            <button onclick="window.handleAnon()"
                style="margin-top:15px; background:none; border:none; color:var(--text-muted); cursor:pointer; font-size: 0.85rem;">Continue
                as Guest</button>
        </div>
    </div>
    </div>

    <!-- Media Modal (Lightbox) -->
    <div id="media-modal" class="modal-overlay" onclick="window.closeFullscreenMedia()">
        <!-- MOD: stop click inside content from closing modal -->
        <div id="media-modal-content" onclick="event.stopPropagation()"
            style="max-width:90vw; max-height:90vh; display:flex; justify-content:center; align-items:center;">
            <!-- Media injected here -->
        </div>
        <button onclick="window.closeFullscreenMedia()"
            style="position:absolute; top:20px; right:20px; background:none; border:none; color:white; font-size:2rem; cursor:pointer;">&times;</button>
    </div>

    <!-- Modals -->
    <!-- Create Post Modal -->
    <div id="create-modal" class="modal-overlay" style="align-items: flex-start; padding-top: 5vh;">
        <div class="x-modal-content">
            <div class="x-modal-header">
                <button onclick="window.toggleCreateModal(false)" class="x-close-btn">&times;</button>
                <button class="destination-field" type="button" onclick="window.openDestinationPicker()"
                    aria-label="Select posting destination">
                    <div class="destination-field-label">Posting to</div>
                    <div class="destination-field-value">
                        <span id="destination-current-label">Select...</span>
                        <span id="destination-current-verified" class="verified-badge" style="display:none;"></span>
                    </div>
                    <div class="destination-field-chevron"><i class="ph ph-caret-right"></i></div>
                    <div id="destination-loading-spinner" class="inline-spinner" aria-hidden="true"></div>
                </button>
            </div>

            <div id="destination-helper" class="category-helper" style="display:none; margin: 0 1rem;"></div>

            <div class="x-body">
                <div id="modal-user-avatar" class="x-avatar"></div>
                <div class="x-inputs">
                    <select id="postVisibility" class="x-pill-select">
                        <option value="Everyone">Everyone can reply</option>
                        <option value="Followers">Followers only</option>
                        <option value="Mentions">Only people you mention</option>
                    </select>

                    <input type="text" id="postTitle" class="x-input-title" placeholder="Title (Optional)">
                    <textarea id="postContent" class="x-input-content" placeholder="What is happening?!"
                        rows="3"></textarea>

                    <div class="composer-meta-controls">
                        <button type="button" class="icon-pill" onclick="window.toggleTagInput()"><i
                                class="ph ph-hash"></i> # Tags</button>
                        <button type="button" class="icon-pill" onclick="window.toggleMentionInput()"><i
                                class="ph ph-at"></i> @ Mentions</button>
                    </div>
                    <div id="tag-input-row" class="composer-inline" style="display:none;">
                        <input type="text" id="tag-input" class="form-input" placeholder="Add a tag"
                            onkeydown="window.handleTagInputKey(event)"
                            oninput="window.filterTagSuggestions(this.value)">
                        <div id="tag-suggestions" class="suggestion-row"></div>
                    </div>
                    <div id="tag-helper-text" class="tag-helper-text" style="display:none;"></div>
                    <div id="tag-limit-note" class="tag-helper-text" style="display:none;">You can add up to 10 tags.</div>
                    <div id="composer-tags-list" class="chip-row"></div>
                    <div id="mention-input-row" class="composer-inline" style="display:none;">
                        <input type="text" id="mention-input" class="form-input" placeholder="Search usernames"
                            oninput="window.handleMentionInput(event)">
                        <div id="mention-suggestions" class="mention-suggestions-list"></div>
                    </div>
                    <div id="composer-mentions-list" class="mention-row"></div>

                    <div id="img-preview-container" class="attachment-preview">
                        <button onclick="window.clearPostImage()" class="remove-attachment">&times;</button>
                        <img id="img-preview-tag" src="">
                    </div>

                    <div id="extra-options-area" class="extra-options-panel">
                        <div id="post-opt-poll" style="display:none;">
                            <div class="composer-subheader">Poll</div>
                            <input type="text" id="poll-title-input" class="form-input" placeholder="Poll title"
                                oninput="window.handlePollTitleChange(this.value)" style="margin-bottom:8px;">
                            <div id="poll-options-container" class="poll-options"></div>
                            <div class="poll-actions">
                                <button type="button" class="icon-pill" onclick="window.addPollOption()"><i
                                        class="ph ph-plus"></i> Add option</button>
                                <span class="poll-helper">2‚Äì5 options</span>
                            </div>
                        </div>
                        <div id="post-opt-gif" style="display:none;">
                            <input type="text" class="form-input" placeholder="Paste GIF URL..."
                                style="margin-bottom:0;">
                        </div>
                        <div id="post-opt-schedule" style="display:none;">
                            <div class="composer-subheader">Scheduled Post</div>
                            <input type="datetime-local" id="schedule-input" class="form-input" style="margin-bottom:0;"
                                onchange="window.handleScheduleChange(this.value)">
                        </div>
                        <div id="post-opt-location" style="display:none;">
                            <div class="composer-subheader">Location</div>
                            <input type="text" id="location-input" class="form-input" placeholder="Search locations"
                                style="margin-bottom:6px;" oninput="window.handleLocationInput(this.value)">
                            <div id="location-suggestions" class="suggestion-row"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="x-footer">
                <div class="x-toolbar">
                    <input type="file" id="postFile" style="display: none;" accept="image/*"
                        onchange="window.previewPostImage(this)">
                    <button class="x-tool-btn" onclick="document.getElementById('postFile').click()" title="Media"><i
                            class="ph ph-camera"></i></button>
                    <button class="x-tool-btn" onclick="window.togglePostOption('gif')" title="GIF"><i
                            class="ph ph-gif"></i></button>
                    <button class="x-tool-btn" onclick="window.togglePostOption('poll')" title="Poll"><i
                            class="ph ph-chart-bar"></i></button>
                    <button class="x-tool-btn" onclick="alert('Emoji picker coming soon!')" title="Emoji"><i
                            class="ph ph-smiley"></i></button>
                    <button class="x-tool-btn" onclick="window.togglePostOption('schedule')" title="Schedule"><i
                            class="ph ph-calendar"></i></button>
                    <button class="x-tool-btn" onclick="window.togglePostOption('location')" title="Location"><i
                            class="ph ph-map-pin"></i></button>
                </div>
                <button id="publishBtn" onclick="window.createPost()" class="x-post-btn">Post</button>
            </div>
        </div>
    </div>

    <!-- Destination Picker Modal -->
    <div id="destination-picker-modal" class="modal-overlay">
        <div class="modal-content destination-picker">
            <div class="destination-picker-header">
                <div>
                    <div class="destination-picker-title">Choose where to post</div>
                    <div class="destination-picker-subtitle">Select a destination for your post.</div>
                </div>
                <button onclick="window.closeDestinationPicker()" class="x-close-btn"
                    aria-label="Close destination picker">&times;</button>
            </div>

            <div id="destination-picker-tabs" class="destination-tabs"></div>

            <div class="destination-search">
                <i class="ph ph-magnifying-glass"></i>
                <input id="destination-search-input" type="text" placeholder="Search destinations"
                    aria-label="Search destinations">
            </div>

            <div id="destination-create-area"></div>

            <div id="destination-results" class="destination-results"></div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal-overlay">
        <div class="modal-content">
            <h2 style="margin-bottom:1rem; font-weight:800;">Profile &amp; Settings</h2>

            <div class="settings-section">
                <div class="settings-section-header">Appearance</div>
                <div style="margin: 0.5rem 0; padding: 1rem; border:1px solid var(--border); border-radius:12px;">
                    <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom:8px;">
                        <div style="font-weight:700;">Theme</div>
                        <div style="color:var(--text-muted); font-size:0.85rem;">Dark ¬∑ Light ¬∑ System</div>
                    </div>
                    <div class="theme-options">
                        <label class="theme-option"><input type="radio" name="theme-choice" value="dark"> Dark</label>
                        <label class="theme-option"><input type="radio" name="theme-choice" value="light"> Light</label>
                        <label class="theme-option"><input type="radio" name="theme-choice" value="system">
                            System</label>
                    </div>
                </div>
            </div>

            <div class="settings-section">
                <div class="settings-section-header">Public Profile</div>

                <div class="settings-avatar-row">
                    <div class="avatar-edit-wrapper">
                        <div id="settings-avatar-preview" class="profile-pic"
                            style="width:80px; height:80px; margin:0;">
                            <span>U</span>
                            <button type="button" class="avatar-edit-btn"
                                onclick="document.getElementById('set-pic-file').click()"><i
                                    class="ph ph-pencil"></i></button>
                        </div>
                    </div>
                    <div style="display:flex; flex-direction:column; gap:6px; width:100%;">
                        <button type="button" class="icon-pill"
                            onclick="document.getElementById('set-pic-file').click()"><i
                                class="ph ph-upload-simple"></i> Upload Photo</button>
                        <button type="button" class="icon-pill"
                            onclick="document.getElementById('set-pic-camera').click()"><i class="ph ph-camera"></i>
                            Take Photo</button>
                        <button type="button" id="remove-photo-btn" class="icon-pill"
                            onclick="window.removeProfilePhoto()"><i class="ph ph-x-circle"></i> Remove Photo</button>
                    </div>
                </div>
            </div>

            <input type="file" id="set-pic-file" class="form-input" accept="image/*" style="display:none;">
            <input type="file" id="set-pic-camera" class="form-input" accept="image/*" capture="environment"
                style="display:none;">

            <div class="settings-grid">
                <div>
                    <label class="settings-label">Real Name</label>
                    <input type="text" id="set-real-name" class="form-input" placeholder="Your legal name">
                </div>
                <div>
                    <label class="settings-label">Display Name</label>
                    <input type="text" id="set-name" class="form-input" placeholder="Name shown on profile">
                </div>
            </div>

            <div class="settings-grid">
                <div>
                    <label class="settings-label">Username</label>
                    <input type="text" id="set-username" class="form-input" placeholder="@handle">
                </div>
                <div>
                    <label class="settings-label">Nickname (Optional)</label>
                    <input type="text" id="set-nickname" class="form-input" placeholder="Friends know you as...">
                </div>
            </div>

            <label class="settings-label">Bio</label>
            <textarea id="set-bio" class="form-input" placeholder="Bio"></textarea>

            <div class="settings-grid">
                <div>
                    <label class="settings-label">Website / Link</label>
                    <input type="text" id="set-website" class="form-input" placeholder="https://example.com">
                </div>
                <div>
                    <label class="settings-label">Region / Location</label>
                    <input type="text" id="set-region" class="form-input" placeholder="City, Country">
                </div>
            </div>

            <div class="settings-grid">
                <div>
                    <label class="settings-label">Email</label>
                    <input type="email" id="set-email" class="form-input" placeholder="you@example.com">
                </div>
                <div>
                    <label class="settings-label">Phone</label>
                    <input type="tel" id="set-phone" class="form-input" placeholder="(555) 123-4567">
                </div>
            </div>

            <label class="settings-label">Gender</label>
            <select id="set-gender" class="form-input">
                <option value="">Select</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Non-binary">Non-binary</option>
                <option value="Prefer not to say">Prefer not to say</option>
                <option value="Other">Other</option>
            </select>

            <button onclick="window.saveSettings()" class="create-btn-sidebar">Save Changes</button>
            <button onclick="window.openVerificationRequest()" class="icon-pill"
                style="margin-top:10px; width:100%; justify-content:center;"><i class="ph ph-shield-check"></i> Apply
                for Verification</button>
            <button onclick="window.toggleSettingsModal(false)"
                style="margin-top:10px; width:100%; padding:10px; background:transparent; border:1px solid var(--border); color:var(--text-muted); border-radius:30px; cursor:pointer;">Cancel</button>
        </div>

    </div>
    </div>

    <div id="new-chat-modal" class="modal-overlay">
        <div class="modal-content">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h3 style="margin:0; font-weight:800;">Start a chat</h3>
                <button class="x-close-btn" onclick="window.toggleNewChatModal(false)">&times;</button>
            </div>
            <input id="chat-search" class="form-input" placeholder="Search by username"
                oninput="window.searchChatUsers(this.value)">
            <div id="selected-chat-users" style="margin-top:10px;"></div>
            <div id="chat-group-name-row" style="margin-top:10px; display:none;">
                <label class="settings-label" for="chat-group-name">Chat name (optional)</label>
                <input id="chat-group-name" class="form-input" placeholder="Group chat name">
            </div>
            <div id="chat-search-results" style="max-height:200px; overflow:auto; margin-top:10px;"></div>
            <div class="modal-actions">
                <button class="icon-pill" onclick="window.toggleNewChatModal(false)"><i class="ph ph-x"></i>
                    Cancel</button>
                <button id="start-chat-btn" class="create-btn-sidebar" onclick="window.startChatFromSelection()"
                    disabled>Start chat</button>
            </div>
        </div>
    </div>

    <div id="video-upload-modal" class="modal-overlay">
        <div class="modal-content video-upload-modal">
            <div class="video-upload-header">
                <div>
                    <h3 id="video-upload-modal-title">Create Video</h3>
                    <p id="video-upload-modal-subtitle">Upload a clip, add details, and publish to your Nexera channel.</p>
                </div>
                <button class="x-close-btn" onclick="window.toggleVideoUploadModal(false)">&times;</button>
            </div>
            <div class="video-upload-shell">
                <div class="video-upload-panel">
                    <label class="video-upload-drop" for="video-file">
                        <input type="file" id="video-file" accept="video/mp4,video/*" class="video-upload-input"
                            onchange="window.handleVideoFileChange(event)">
                        <div class="video-upload-icon"><i class="ph ph-video-camera"></i></div>
                        <div class="video-upload-title">Drop a video or click to browse</div>
                        <div class="video-upload-subtitle">MP4 recommended ‚Ä¢ up to 2 minutes for Shorts</div>
                    </label>
                    <div class="video-upload-preview" id="video-upload-preview" aria-hidden="true">
                        <video id="video-preview-player" muted playsinline></video>
                        <div class="video-upload-preview-meta">
                            <div>Auto thumbnail</div>
                            <img id="video-thumbnail-preview" alt="Video thumbnail preview" />
                        </div>
                    </div>
                    <div class="video-upload-thumb">
                        <label class="settings-label">Custom thumbnail (optional)</label>
                        <input type="file" id="video-thumbnail" accept="image/*" class="form-input"
                            onchange="window.handleThumbnailChange(event)">
                        <p class="video-upload-hint">We‚Äôll grab the first frame if you skip this step.</p>
                    </div>
                </div>
                <div class="video-upload-panel">
                    <label class="settings-label" for="video-title">Title</label>
                    <input id="video-title" class="form-input" placeholder="Give your video a title">
                    <label class="settings-label" for="video-description">Description</label>
                    <textarea id="video-description" class="form-input" rows="3"
                        placeholder="Add a short description"></textarea>
                    <button id="video-destination-field" class="destination-field" type="button"
                        aria-label="Select posting destination for video">
                        <div class="destination-field-label">Posting to</div>
                        <div class="destination-field-value">
                            <span id="video-destination-current-label">No topic</span>
                            <span id="video-destination-current-verified" class="verified-badge"
                                style="display:none;"></span>
                        </div>
                        <div class="destination-field-chevron"><i class="ph ph-caret-right"></i></div>
                    </button>
                    <div class="composer-meta-controls">
                        <button type="button" class="icon-pill" onclick="window.toggleVideoTagInput()"><i
                                class="ph ph-hash"></i> Tags</button>
                        <button type="button" class="icon-pill" onclick="window.toggleVideoMentionInput()"><i
                                class="ph ph-at"></i> Mentions</button>
                    </div>
                    <div id="video-tag-input-row" class="composer-inline" style="display:none;">
                        <input type="text" id="video-tag-input" class="form-input" placeholder="Add a tag"
                            onkeydown="window.handleVideoTagInputKey(event)"
                            oninput="window.filterVideoTagSuggestions(this.value)">
                        <div id="video-tag-suggestions" class="suggestion-row"></div>
                    </div>
                    <div id="video-tag-helper-text" class="tag-helper-text" style="display:none;"></div>
                    <div id="video-tag-limit-note" class="tag-helper-text" style="display:none;">You can add up to 10 tags.</div>
                    <div id="video-tags-list" class="chip-row"></div>
                    <div id="video-mention-input-row" class="composer-inline" style="display:none;">
                        <input type="text" id="video-mention-input" class="form-input" placeholder="Search usernames"
                            oninput="window.handleVideoMentionInput(event)">
                        <div id="video-mention-suggestions" class="suggestion-row"></div>
                    </div>
                    <div id="video-mentions-list" class="mention-row"></div>
                    <div class="video-advanced-settings">
                        <div class="video-advanced-header">Advanced settings</div>
                        <div class="video-advanced-toggle">
                            <span>Monetizable</span>
                            <label class="switch" aria-label="Toggle monetizable">
                                <input type="checkbox" id="video-monetizable">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="video-advanced-toggle">
                            <span>Downloadable</span>
                            <label class="switch" aria-label="Toggle downloadable">
                                <input type="checkbox" id="video-allow-download">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="video-advanced-toggle">
                            <span>Embeddable</span>
                            <label class="switch" aria-label="Toggle embeddable">
                                <input type="checkbox" id="video-allow-embed">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="video-advanced-toggle">
                            <span>Allow comments</span>
                            <label class="switch" aria-label="Toggle comments">
                                <input type="checkbox" id="video-allow-comments" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="video-advanced-toggle">
                            <span>Notify followers</span>
                            <label class="switch" aria-label="Toggle notify followers">
                                <input type="checkbox" id="video-notify-followers" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="video-advanced-toggle">
                            <span>Age restricted</span>
                            <label class="switch" aria-label="Toggle age restricted">
                                <input type="checkbox" id="video-age-restricted">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="video-advanced-toggle">
                            <span>Sensitive content</span>
                            <label class="switch" aria-label="Toggle sensitive content">
                                <input type="checkbox" id="video-sensitive-content">
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                    <label class="settings-label" for="video-visibility">Visibility</label>
                    <select id="video-visibility" class="form-input">
                        <option value="public">Public</option>
                        <option value="private">Private</option>
                    </select>
                    <div class="video-upload-actions">
                        <button class="icon-pill" onclick="window.toggleVideoUploadModal(false)">Cancel</button>
                        <button id="video-upload-submit" class="create-btn-sidebar" onclick="window.handleVideoSubmit()">Publish</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="video-task-viewer" class="modal-overlay">
        <div class="modal-content video-task-modal">
            <div class="video-task-header">
                <div>
                    <h3>Video Manager</h3>
                    <p>Manage uploads and update published video details.</p>
                </div>
                <button class="x-close-btn" onclick="window.toggleTaskViewer(false)">&times;</button>
            </div>
            <div id="video-task-list" class="video-task-list"></div>
        </div>
    </div>

    <div id="go-live-modal" class="modal-overlay">
        <div class="modal-content">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h3 style="margin:0; font-weight:800;">Go Live</h3>
                <button class="x-close-btn" onclick="window.toggleGoLiveModal(false)">&times;</button>
            </div>
            <input id="live-title" class="form-input" placeholder="Session title">
            <input id="live-category" class="form-input" placeholder="Topic">
            <input id="live-tags" class="form-input" placeholder="Tags (comma separated)">
            <input id="live-url" class="form-input" placeholder="Stream embed URL">
            <button class="create-btn-sidebar" onclick="window.createLiveSession()">Start Live</button>
        </div>
    </div>

    <div id="verification-modal" class="modal-overlay">
        <div class="modal-content">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h3 style="margin:0; font-weight:800;">Apply for Verification</h3>
                <button class="x-close-btn" onclick="window.toggleVerificationModal(false)">&times;</button>
            </div>
            <label class="settings-label">Topic</label>
            <input id="verify-category" class="form-input" placeholder="creator / journalist / org">
            <label class="settings-label">Evidence Links (one per line)</label>
            <textarea id="verify-links" class="form-input" rows="3"></textarea>
            <label class="settings-label">Notes</label>
            <textarea id="verify-notes" class="form-input" rows="2"></textarea>
            <button class="create-btn-sidebar" onclick="window.submitVerificationRequest()">Submit Request</button>
        </div>
    </div>

    <!-- Review Modal -->
    <div id="review-modal" class="modal-overlay">
        <div class="modal-content">
            <div style="display:flex; justify-content:space-between; margin-bottom:1rem;">
                <h2 style="font-weight:800;"><i class="ph ph-scales"></i> Peer Review</h2>
                <button onclick="window.closeReview()"
                    style="background:none; border:none; color:var(--text-muted); font-size:1.5rem;">&times;</button>
            </div>

            <div style="background:#000; padding:1rem; border-radius:8px; margin-bottom:1rem; text-align:center;">
                <div id="review-bar"
                    style="display:flex; height:8px; background:#333; border-radius:4px; overflow:hidden; margin-bottom:10px;">
                </div>
                <div id="review-stats-text" style="font-size:0.85rem; font-weight:bold;">Loading...</div>
            </div>

            <div id="review-list" style="max-height:200px; overflow-y:auto; margin-bottom:1rem;"></div>

            <div id="review-submit-section">
                <h3 style="font-size:1rem; margin-bottom:10px;">Submit Audit</h3>
                <select id="review-rating" class="form-select">
                    <option value="verified">Verified Accurate</option>
                    <option value="citation">Needs Citations</option>
                    <option value="misleading">Misleading / False</option>
                </select>
                <textarea id="review-note" class="form-input" rows="2" placeholder="Explanation..."></textarea>
                <button onclick="window.submitReview()" class="create-btn-sidebar" style="margin-top:0;">Submit
                    Review</button>
            </div>

            <div id="review-remove-section"
                style="display:none; text-align:center; padding-top:10px; border-top:1px solid var(--border);">
                <div id="review-user-status" style="margin-bottom:10px; font-weight:bold; color:var(--text-main);">
                </div>
                <button onclick="window.removeReview()" class="create-btn-sidebar"
                    style="background:#ff3d3d; border:none; color:white; width:auto; padding: 10px 20px;">Remove My
                    Review</button>
            </div>
        </div>
    </div>

    <div id="post-options-modal" class="modal-overlay">
        <div class="modal-content" style="max-width:420px;">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
                <h3 style="margin:0; font-weight:800;">Post Options</h3>
                <button class="x-close-btn" onclick="window.closePostOptions()">&times;</button>
            </div>
            <div id="post-options-actions" style="display:flex; flex-direction:column; gap:10px;">
                <button class="icon-pill" onclick="window.openReportModal()"><i class="ph ph-flag"></i> Report</button>
                <button id="delete-post-btn" class="icon-pill"
                    style="display:none; background:#ff3d3d; border:none; color:white;"
                    onclick="window.confirmDeletePost()">
                    <i class="ph ph-trash"></i> Delete
                </button>
            </div>
        </div>
    </div>

    <div id="post-options-dropdown" class="post-options-dropdown menu-surface">
        <button id="dropdown-edit-btn" style="display:none;" onclick="window.handlePostOptionSelect('edit')"><i
                class="ph ph-pencil"></i> Edit Post</button>
        <button id="dropdown-share-btn" onclick="window.handlePostOptionSelect('share')"><i
                class="ph ph-paper-plane-tilt"></i> Share</button>
        <button id="dropdown-message-btn" onclick="window.handlePostOptionSelect('message')"><i class="ph ph-chats"></i>
            Message author</button>
        <button onclick="window.handlePostOptionSelect('report')"><i class="ph ph-flag"></i> Report</button>
        <button id="dropdown-delete-btn" onclick="window.handlePostOptionSelect('delete')" style="display:none;"><i
                class="ph ph-trash"></i> Delete</button>
    </div>

    <div id="report-modal" class="modal-overlay">
        <div class="modal-content" style="max-width:480px;">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
                <h3 style="margin:0; font-weight:800;">Report Post</h3>
                <button class="x-close-btn" onclick="window.closeReportModal()">&times;</button>
            </div>
            <label class="settings-label">Topic</label>
            <select id="report-category" class="form-select">
                <option value="">Select category</option>
                <option>Spam</option>
                <option>Harassment / Hate</option>
                <option>Nudity / Sexual content</option>
                <option>Violence / Dangerous content</option>
                <option>Misinformation</option>
                <option>Illegal activity</option>
                <option>Other</option>
            </select>
            <label class="settings-label">Details (optional)</label>
            <textarea id="report-details" class="form-input" rows="3" maxlength="500"
                placeholder="Add any context that helps our team"></textarea>
            <div style="display:flex; justify-content:flex-end; gap:10px; margin-top:12px;">
                <button class="icon-pill" onclick="window.closeReportModal()">Cancel</button>
                <button class="create-btn-sidebar" style="width:auto;" onclick="window.submitReport()">Report</button>
            </div>
        </div>
    </div>

    <div id="confirm-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="confirm-title">
        <div class="modal-content compact">
            <div style="display:flex; justify-content:space-between; align-items:center; gap:12px;">
                <h3 id="confirm-title" style="margin:0; font-weight:800;">Confirm</h3>
                <button class="x-close-btn" onclick="window.cancelConfirmModal()">&times;</button>
            </div>
            <div id="confirm-body" class="confirm-message"></div>
            <div id="confirm-helper" class="confirm-helper"></div>
            <div id="confirm-extra"></div>
            <div class="confirm-actions">
                <button id="confirm-cancel-btn" class="icon-pill" onclick="window.cancelConfirmModal()"><i
                        class="ph ph-x"></i> Cancel</button>
                <button id="confirm-submit-btn" class="create-btn-sidebar" style="width:auto;"><span
                        id="confirm-submit-label">Confirm</span></button>
            </div>
        </div>
    </div>

    <!-- App Layout -->
    <header class="mobile-app-bar">
        <div class="mobile-app-bar__left" onclick="window.navigateTo('feed')">
            <img class="brand-logo brand-logo-mobile" data-logo-variant="icon" alt="Nexera logo"
                src="https://firebasestorage.googleapis.com/v0/b/spike-streaming-service.firebasestorage.app/o/apps%2Fnexera%2Fassets%2Ficons%2Ficon.png?alt=media&token=3db62710-7412-46bf-a981-ace4715e2bc6">
            <div class="mobile-app-meta">
                <span class="mobile-app-title">Nexera</span>
                <span id="mobile-section-label" class="mobile-section-label">Home</span>
            </div>
        </div>
        <div class="mobile-app-bar__actions">
            <button class="icon-btn sidebar-toggle-btn" onclick="window.Nexera?.toggleSidebar?.()" aria-label="Toggle sidebar"><i class="ph ph-list"></i></button>
            <button class="icon-btn" onclick="window.scrollTo({top:0, behavior:'smooth'});"
                aria-label="Scroll to top"><i class="ph ph-arrow-up"></i></button>
            <button class="icon-btn" onclick="window.toggleDiscoverSearch()" aria-label="Search"><i
                    class="ph ph-magnifying-glass"></i></button>
            <button class="icon-btn" onclick="window.openMobileActionSheet()" aria-label="Create"><i
                    class="ph ph-plus"></i></button>
            <button class="icon-btn" onclick="window.navigateTo('profile')" aria-label="Profile"><i
                    class="ph ph-user"></i></button>
        </div>
    </header>

    <div id="app-layout" class="app-layout">
        <nav class="sidebar-left glass-panel">
            <div class="sidebar-header-row">
                <button class="icon-pill sidebar-toggle-btn" type="button" onclick="window.Nexera?.toggleSidebar?.()" aria-label="Toggle sidebar"><i class="ph ph-list"></i></button>
                <div class="brand-nav" onclick="window.navigateTo('feed')">
                <img class="brand-logo brand-logo-nav" data-logo-variant="auto" alt="Nexera"
                    src="https://firebasestorage.googleapis.com/v0/b/spike-streaming-service.firebasestorage.app/o/apps%2Fnexera%2Fassets%2Ficons%2Fwhiteicon.png?alt=media&token=366d09a9-61f6-4096-af08-a01a119c339e">
                <span class="brand-wordmark nexera-gradient-text">Nexera</span>
            </div>
            </div>
            <div class="sidebar-nav-body">
            <a onclick="window.navigateTo('feed')" id="nav-feed" class="nav-item active"><i
                    class="ph-bold ph-house"></i> Home</a>
            <a onclick="window.navigateTo('live')" id="nav-live" class="nav-item"><i class="ph-bold ph-broadcast"></i>
                Live</a>
            <a onclick="window.navigateTo('videos')" id="nav-videos" class="nav-item"><i
                    class="ph-bold ph-film-strip"></i> Videos</a>
            <a onclick="window.openMessagesPage()" id="nav-messages" class="nav-item"><i class="ph-bold ph-chats"></i>
                <span class="nav-label">Inbox</span>
                <span id="nav-inbox-badge" class="nav-badge" style="display:none;"></span></a>
            <a onclick="window.navigateTo('discover')" id="nav-discover" class="nav-item"><i
                    class="ph-bold ph-compass"></i> Discover</a>
            <a onclick="window.navigateTo('saved')" id="nav-saved" class="nav-item"><i class="ph-bold ph-bookmark"></i>
                Saved</a>
            <a onclick="window.navigateTo('profile')" id="nav-profile" class="nav-item"><i class="ph-bold ph-user"></i>
                Profile</a>
            <a onclick="window.navigateTo('staff')" id="nav-staff" class="nav-item" style="display:none;"><i
                    class="ph-bold ph-shield-star"></i> Staff</a>
            <button onclick="window.toggleCreateModal(true)" class="create-btn-sidebar"><i class="ph-bold ph-plus"></i>
                <span class="btn-label">Post</span></button>
        </div>
        </nav>


        <main class="main-feed no-scrollbar">
            <div id="view-feed" class="view-section">
                <button id="category-scroll-left" class="category-scroll-btn category-scroll-left"
                    style="display: none;" onclick="window.scrollCategoryHeader(-1)">
                    <i class="ph ph-caret-left"></i>
                </button>
                <div id="category-header" class="category-header"></div>
                <button id="category-scroll-right" class="category-scroll-btn category-scroll-right"
                    style="display: none;" onclick="window.scrollCategoryHeader(1)">
                    <i class="ph ph-caret-right"></i>
                </button>
                <div id="feed-content" style="padding:1rem; max-width:800px; margin:0 auto;"></div>
            </div>

            <div id="view-saved" class="view-section" style="display:none;">
                <div style="padding: 1rem 1rem 0 1rem;">
                    <h2 style="font-weight:800; font-size:1.5rem; margin-bottom:1rem;">Saved Posts</h2>
                    <input type="text" class="form-input" placeholder="Search your saved posts..."
                        oninput="window.handleSavedSearch(event)">

                    <div style="display:flex; gap:10px; margin-bottom:1rem; overflow-x:auto; padding-bottom:5px;">
                        <button class="saved-pill active" onclick="window.setSavedFilter('All Saved')">All
                            Saved</button>
                        <button class="saved-pill" onclick="window.setSavedFilter('Recent')">Recently Saved</button>
                        <button class="saved-pill" onclick="window.setSavedFilter('Oldest')">Oldest Saved</button>
                        <button class="saved-pill" onclick="window.setSavedFilter('Videos')">Videos</button>
                        <button class="saved-pill" onclick="window.setSavedFilter('Images')">Images</button>
                    </div>
                </div>
                <div id="saved-content" style="padding:1rem; max-width:800px; margin:0 auto;"></div>
            </div>



            <div id="view-thread" class="view-section" style="display:none;">
                <div class="glass-panel"
                    style="position: sticky; top: 0; z-index: 20; padding: 1rem; display: flex; align-items: center; gap: 15px;">
                    <button onclick="window.goBack()" class="back-btn-outline"
                        style="background: none; color: var(--text-main); cursor: pointer; display: flex; align-items: center; gap: 5px;">
                        <span>‚Üê</span> Back
                    </button>
                    <h2 style="font-weight: 800; font-size: 1.2rem;">Discuss</h2>
                </div>
                <div id="thread-main-post"></div>

                <div id="thread-input-default-slot" style="padding: 1rem; border-bottom: 1px solid var(--border);">
                    <div id="thread-input-area" style="display: flex; gap: 10px;">
                        <div id="thread-input-pfp"
                            style="width: 40px; height: 40px; border-radius: 12px; background: #333;"></div>
                        <div style="flex: 1;">
                            <textarea id="thread-input" class="form-input" placeholder="Post your reply" rows="2"
                                style="margin-bottom: 5px; background: transparent; border: none; border-bottom: 1px solid var(--border); border-radius: 0; padding: 10px 10px 10px 0;"></textarea>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <input type="file" id="thread-file" style="display: none;"
                                        onchange="window.handleFileSelect(this)">
                                    <button onclick="window.triggerFileSelect()"
                                        style="background: none; border: none; color: var(--primary); cursor: pointer; font-size: 0.9rem;"
                                        id="attach-btn-text">üìé Attach</button>
                                </div>
                                <div>
                                    <button id="thread-cancel-btn" onclick="window.resetInputBox()"
                                        style="background: transparent; color: var(--text-muted); border: none; margin-right: 10px; cursor: pointer; display: none;">Cancel</button>
                                    <button id="thread-send-btn" onclick="window.sendComment()"
                                        class="create-btn-sidebar"
                                        style="width: auto; padding: 6px 15px; margin-top: 0; margin-right: 10px; font-size: 0.9rem;">Reply</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="position: relative; max-width: 800px; margin: 0 auto; padding: 10px 10px 0 0;">
                    <div class="thread-filter-row"
                        style="position: absolute; top: 10px; right: 10px; margin: 0; z-index: 15; display: flex; align-items: center; gap: 8px; background: var(--bg-body); border-radius: 8px; padding: 8px 12px;">
                        <label for="comment-filter-mode" class="thread-filter-label">Filter</label>
                        <select id="comment-filter-mode" class="form-input" style="max-width:220px;"
                            onchange="window.updateCommentFilterMode(this.value)">
                            <option value="popularity">Popularity</option>
                            <option value="user">User</option>
                            <option value="datetime">Date/Time</option>
                            <option value="content">Content</option>
                        </select>
                        <input id="comment-filter-input" class="form-input" style="display:none; max-width:260px;"
                            placeholder="Type to filter..." oninput="window.updateCommentFilterQuery(this.value)">
                    </div>
                    <div id="thread-stream" style="padding: 3rem 10px 1rem 1rem; max-width: 800px;"></div>
                </div>
            </div>

            <div id="view-public-profile" class="view-section" style="display:none;"></div>

            <div id="view-discover" class="view-section" style="display:none;">
                <div id="discover-topbar"></div>
                <div id="discover-results" style="padding: 0 1rem 1rem 1rem; max-width:800px; margin:0 auto;">
                    <div class="empty-state">
                        <p>Start typing to search or explore categories.</p>
                    </div>
                </div>
            </div>

            <div id="view-live" class="view-section live-view" style="display:none;">
                <div class="live-view-shell">
                    <div id="live-topbar"></div>
                    <div id="live-featured-row" class="live-featured-row"></div>
                    <div id="live-filter-row" class="live-filter-row"></div>
                    <hr id="live-divider" class="live-divider">
                    <div id="live-directory-grid" class="live-grid live-directory-grid"></div>
                </div>
            </div>

            <div id="view-videos" class="view-section" style="display:none;">
                <div id="videos-topbar"></div>
                <div id="video-feed" class="video-feed"></div>
                <div id="video-detail-modal" class="video-modal" style="display:none;">
                    <div class="video-modal-backdrop" onclick="window.closeVideoDetail()"></div>
                    <div class="video-modal-dialog">
                        <button class="video-modal-close" type="button" onclick="window.closeVideoDetail()"
                            aria-label="Close video details">&times;</button>
                        <div class="video-modal-body">
                            <aside class="video-modal-side">
                                <div class="video-modal-channel-card">
                                    <div id="video-modal-avatar" class="video-modal-avatar"></div>
                                    <div class="video-modal-channel-info">
                                        <div class="video-modal-channel-name" id="video-modal-channel-name"></div>
                                        <div class="video-modal-channel-handle" id="video-modal-channel-handle"></div>
                                    </div>
                                    <button id="video-modal-follow" class="create-btn-sidebar">Follow</button>
                                </div>
                            </aside>
                            <main class="video-modal-main">
                                <div class="video-modal-player">
                                    <video id="video-modal-player" controls playsinline></video>
                                </div>
                                <div class="video-modal-actions-bar">
                                    <div class="video-modal-actions">
                                        <button id="video-modal-like" class="icon-pill"></button>
                                        <button id="video-modal-dislike" class="icon-pill"></button>
                                        <button id="video-modal-save" class="icon-pill"></button>
                                        <button id="video-modal-share" class="icon-pill"></button>
                                    </div>
                                    <div class="video-modal-views" id="video-modal-views"></div>
                                </div>
                                <div class="video-modal-title" id="video-modal-title"></div>
                                <div class="video-modal-description" id="video-modal-description"></div>
                                <div class="video-modal-comments">
                                    <div class="video-modal-comments-header">Comments</div>
                                    <div class="video-modal-comments-empty">No Comments Yet</div>
                                </div>
                            </main>
                        </div>
                    </div>
                </div>
            </div>

            <div id="view-messages" class="view-section" style="display:none;">
                <div class="inbox-tabs">
                    <button class="inbox-tab" data-mode="content" onclick="window.setInboxMode('content')">
                        <span class="inbox-tab-label">Content</span>
                        <span class="inbox-tab-badge" data-mode="content"></span>
                    </button>
                    <button class="inbox-tab active" data-mode="messages" onclick="window.setInboxMode('messages')">
                        <span class="inbox-tab-label">Messages</span>
                        <span class="inbox-tab-badge" data-mode="messages"></span>
                    </button>
                    <button class="inbox-tab" data-mode="account" onclick="window.setInboxMode('account')">
                        <span class="inbox-tab-label">Account Notifications</span>
                        <span class="inbox-tab-badge" data-mode="account"></span>
                    </button>
                </div>
                <div id="inbox-panel-messages" class="inbox-panel active">
                    <div class="inbox-layout">
                        <div class="inbox-sidebar">
                        <div class="inbox-header">
                            <div class="inbox-title">Inbox</div>
                            <button class="icon-pill" onclick="window.openNewChatModal()"><i class="ph ph-plus"></i>
                                New</button>
                        </div>
                        <input id="conversation-list-search" class="form-input inbox-search-input"
                            placeholder="Search conversations" oninput="window.handleConversationListSearch(event)">
                        <div class="inbox-filters">
                            <button class="inbox-filter active" data-filter="all"
                                onclick="window.setConversationFilter('all')">All</button>
                            <button class="inbox-filter" data-filter="unread"
                                onclick="window.setConversationFilter('unread')">Unread</button>
                            <button class="inbox-filter" data-filter="requests"
                                onclick="window.setConversationFilter('requests')">Message Requests</button>
                            <button class="inbox-filter" data-filter="pinned"
                                onclick="window.setConversationFilter('pinned')">Pinned</button>
                            <button class="inbox-filter" data-filter="archived"
                                onclick="window.setConversationFilter('archived')">Archived</button>
                        </div>
                        <div id="pinned-conversations" class="inbox-pinned" style="display:none;"></div>
                        <div id="conversation-list" class="conversation-list inbox-list"></div>
                        <div id="conversation-list-empty" class="empty-state" style="display:none;"></div>
                    </div>
                        <div class="inbox-thread">
                        <div class="messages-thread-inner">
                            <div class="message-thread-header-row">
                            <button id="mobile-thread-back" class="mobile-thread-back" type="button"
                                onclick="window.mobileMessagesBack()" aria-label="Back to conversations"
                                style="display:none;">
                                <i class="ph ph-arrow-left"></i> Back
                            </button>
                            <div id="message-header" class="message-thread-header">Select a conversation</div>
                        </div>
                            <div class="message-header-tools">
                            <input id="conversation-search" class="form-input" placeholder="Search in conversation"
                                oninput="window.handleConversationSearch(this.value)">
                            <div class="search-nav">
                                <button class="icon-pill" onclick="window.navigateConversationSearch(-1)"><i
                                        class="ph ph-caret-up"></i></button>
                                <button class="icon-pill" onclick="window.navigateConversationSearch(1)"><i
                                        class="ph ph-caret-down"></i></button>
                            </div>
                        </div>
                            <div id="pinned-messages" class="pinned-messages" style="display:none;"></div>
                            <div class="message-scroll-region">
                                <div id="message-thread" class="message-thread-body"></div>
                                <div id="typing-indicator" class="typing-indicator" style="display:none;"></div>
                            </div>
                            <div id="message-reply-preview" class="message-reply-preview" style="display:none;"></div>
                            <div id="message-attachment-preview" class="message-attachment-preview" style="display:none;">
                        </div>
                            <div class="message-compose">
                            <input type="file" id="message-media" accept="image/*,video/*" multiple
                                style="display:none;" onchange="window.handleMessageFileChange(event)">
                            <button class="icon-pill" onclick="document.getElementById('message-media').click()"><i
                                    class="ph ph-image"></i></button>
                            <input id="message-input" class="form-input" placeholder="Message" />
                            <button class="create-btn-sidebar" style="width:auto;"
                                onclick="window.sendMessage()">Send</button>
                        </div>
                        </div>
                    </div>
                    </div>
                </div>
                <div id="inbox-panel-content" class="inbox-panel">
                    <div class="inbox-content-toggles">
                        <button class="inbox-content-toggle active" data-content="posts" onclick="window.toggleInboxContentFilter('posts')">Posts</button>
                        <button class="inbox-content-toggle active" data-content="videos" onclick="window.toggleInboxContentFilter('videos')">Videos</button>
                        <button class="inbox-content-toggle active" data-content="livestreams" onclick="window.toggleInboxContentFilter('livestreams')">Live streams</button>
                    </div>
                    <div class="inbox-content-section" data-content="posts">
                        <div id="inbox-list-posts" class="inbox-notification-list"></div>
                        <div id="inbox-empty-posts" class="empty-state">No post notifications yet.</div>
                    </div>
                    <div class="inbox-content-section" data-content="videos">
                        <div id="inbox-list-videos" class="inbox-notification-list"></div>
                        <div id="inbox-empty-videos" class="empty-state">No video notifications yet.</div>
                    </div>
                    <div class="inbox-content-section" data-content="livestreams">
                        <div id="inbox-list-livestreams" class="inbox-notification-list"></div>
                        <div id="inbox-empty-livestreams" class="empty-state">No livestream notifications yet.</div>
                    </div>
                </div>
                <div id="inbox-panel-account" class="inbox-panel">
                    <div id="inbox-list-account" class="inbox-notification-list"></div>
                    <div id="inbox-empty-account" class="empty-state">No account notifications yet.</div>
                </div>
            </div>

            <div id="view-conversation-settings" class="view-section" style="display:none;">
                <div class="messages-settings-shell">
                    <div class="messages-settings-header">
                        <button class="icon-pill" onclick="window.backToConversationFromSettings()"><i
                                class="ph ph-arrow-left"></i> Back</button>
                        <div class="messages-settings-meta">
                            <div id="conversation-settings-avatar"></div>
                            <div>
                                <div id="conversation-settings-title" style="font-weight:800;">Conversation Settings
                                </div>
                                <div id="conversation-settings-subtitle"
                                    style="color:var(--text-muted); font-size:0.9rem;">Update participants, name, and
                                    preferences</div>
                            </div>
                        </div>
                        <button class="icon-pill" onclick="window.refreshConversationSettings()"><i
                                class="ph ph-arrow-clockwise"></i></button>
                    </div>
                    <div class="messages-settings-grid">
                        <div class="messages-settings-card">
                            <div class="panel-title">Participants</div>
                            <div id="conversation-participant-list"></div>
                            <div class="input-group">
                                <label class="settings-label" for="conversation-add-search">Add participants</label>
                                <input id="conversation-add-search" class="form-input" placeholder="Search by username"
                                    oninput="window.searchConversationParticipants(this.value)">
                            </div>
                            <div id="conversation-add-results" style="max-height:200px; overflow:auto;"></div>
                        </div>
                        <div class="messages-settings-card">
                            <div class="panel-title">Conversation details</div>
                            <div id="conversation-created-by" class="conversation-created-by"></div>
                            <label class="settings-label" for="conversation-name-input">Name</label>
                            <input id="conversation-name-input" class="form-input" placeholder="Conversation name">
                            <div id="conversation-name-hint" class="settings-hint"></div>
                            <button class="create-btn-sidebar" style="width:auto;"
                                onclick="window.saveConversationName()">Save name</button>
                            <div class="input-group" style="margin-top:10px;">
                                <label class="settings-label" for="conversation-avatar-input">Conversation image</label>
                                <input id="conversation-avatar-input" type="file" accept="image/*" class="form-input">
                            </div>
                            <div id="conversation-avatar-preview" class="conversation-avatar-preview"></div>
                            <button class="icon-pill" onclick="window.uploadConversationAvatar()"><i
                                    class="ph ph-upload"></i> Upload image</button>
                            <div class="settings-chip-row" id="conversation-preferences-row">
                                <button class="icon-pill" id="conversation-mute-btn"
                                    onclick="window.toggleConversationMute()"><i class="ph ph-bell-slash"></i> Mute
                                    chat</button>
                                <button class="icon-pill" id="conversation-pin-btn"
                                    onclick="window.toggleConversationPin()"><i class="ph ph-push-pin"></i> Pin</button>
                                <button class="icon-pill" id="conversation-archive-btn"
                                    onclick="window.toggleConversationArchive()"><i class="ph ph-archive"></i>
                                    Archive</button>
                            </div>
                        </div>
                        <div class="messages-settings-card">
                            <div class="panel-title">Controls</div>
                            <div style="display:flex; flex-direction:column; gap:8px;">
                                <button class="icon-pill" onclick="window.blockConversationPartner()"><i
                                        class="ph ph-user-x"></i> Block user</button>
                                <button class="icon-pill" onclick="window.reportConversation()"><i
                                        class="ph ph-flag"></i> Report conversation</button>
                                <button class="icon-pill" onclick="window.leaveConversation()"><i
                                        class="ph ph-door"></i> Leave chat</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="view-profile" class="view-section" style="display:none;"></div>

            <div id="view-staff" class="view-section" style="display:none;">
                <div style="padding:1rem;">
                    <h2 style="font-weight:800; font-size:1.5rem; display:flex; align-items:center; gap:8px;">
                        <i class="ph ph-shield-star"></i> Staff Console
                    </h2>
                    <div id="staff-access-warning" class="empty-state" style="display:none;">Access denied</div>
                    <div id="staff-panels">
                        <div class="staff-grid">
                            <div class="glass-panel">
                                <div class="panel-title">Verification Requests</div>
                                <div id="verification-requests"></div>
                            </div>
                            <div class="glass-panel">
                                <div class="panel-title">Reports Queue</div>
                                <div id="reports-queue"></div>
                            </div>
                            <div class="glass-panel">
                                <div class="panel-title">Admin Logs</div>
                                <div id="admin-logs"></div>
                            </div>
                            <div class="glass-panel">
                                <div class="panel-title">Trending Categories</div>
                                <button id="sync-trending-categories" class="glass-button" type="button">
                                    Sync Trending Categories
                                </button>
                                <div class="panel-helper" style="color:var(--text-muted); font-size:0.85rem; margin-top:8px;">
                                    Staff-only: seed trending stats from Categories.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="view-live-setup" class="view-section" style="display:none;">
                <div id="go-live-root" class="go-live-studio ui-basic is-active">
                    <div class="go-live-studio-topbar gl-panel">
                        <div class="topbar-left">
                            <button class="icon-pill ghost go-live-back-btn" type="button" id="go-live-back-button"><i
                                    class="ph ph-caret-left"></i> Back</button>
                            <div class="go-live-title-block">
                                <div class="go-live-title">Go Live Setup</div>
                                <p class="go-live-subtitle">Streaming Center</p>
                            </div>
                        </div>
                        <div class="topbar-right">
                            <button class="icon-pill ghost" type="button" id="refresh-permissions-btn">Refresh Web
                                Permissions</button>
                            <label for="go-live-ui-config" class="topbar-label is-hidden">UI Config:</label>
                            <select id="go-live-ui-config" class="go-live-select form-input is-hidden">
                                <option value="basic">Basic</option>
                                <option value="advanced">Advanced</option>
                            </select>
                        </div>
                    </div>
                    <div class="go-live-views">
                        <section id="go-live-basic-view" class="go-live-view is-active">
                            <div class="basic-layout basic-live-layout">
                                <div class="preview-pane gl-panel basic-preview-pane">
                                    <div class="preview-pane-header">
                                        <div class="status-chip-row">
                                            <div class="gl-pill go-live-status-outside" id="go-live-status">Ready
                                            </div>
                                            <div class="gl-pill go-live-visibility-pill subtle"
                                                id="go-live-visibility-pill">Preview</div>
                                        </div>
                                        <div class="stream-health">
                                            <span class="muted">Stream Health</span>
                                            <div class="health-dot good"></div>
                                        </div>
                                    </div>
                                    <div class="preview-video-frame" id="live-preview-slot-basic">
                                        <div id="live-preview-shell" class="preview-visual">
                                            <video id="live-preview" autoplay muted playsinline></video>
                                            <div class="preview-overlay">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="preview-footer">
                                        <div class="preview-note">Use this preview to verify audio/video before you
                                            go live.</div>
                                    </div>
                                </div>
                                <div class="gl-panel chat-panel basic-chat-pane" aria-label="Stream chat placeholder">
                                    <div class="section-heading">Stream Chat</div>
                                    <div class="chat-feed chat-body-placeholder" id="basic-chat-feed">Chat will
                                        appear here soon.</div>
                                    <div class="chat-composer-placeholder">
                                        <input class="form-input" type="text" placeholder="Type a message" disabled>
                                        <button class="icon-pill" type="button" disabled><i
                                                class="ph ph-paper-plane-tilt"></i> Send</button>
                                    </div>
                                </div>
                                <div class="config-shell gl-panel basic-config-shell">
                                    <div class="config-scroll">
                                        <div class="config-section">
                                            <div class="section-heading">Stream Details</div>
                                            <div class="gl-field">
                                                <label class="gl-label" for="stream-title">Title</label>
                                                <input id="stream-title" class="form-input"
                                                    placeholder="Name your stream">
                                            </div>
                                            <div class="gl-field">
                                                <label class="gl-label" for="stream-category">Topic</label>
                                                <input id="stream-category" class="form-input"
                                                    placeholder="Gaming, IRL, Podcast...">
                                            </div>
                                            <div class="gl-field">
                                                <label class="gl-label" for="stream-tags">Tags</label>
                                                <input id="stream-tags" class="form-input"
                                                    placeholder="Add tags separated by commas">
                                            </div>
                                        </div>
                                        <div class="config-section">
                                            <div class="section-heading">Source</div>
                                            <p class="helper-text">Choose what you want to share. You can swap
                                                inputs while previewing.</p>
                                            <div class="gl-field">
                                                <label class="gl-label" for="input-mode">Input mode</label>
                                                <select id="input-mode" class="form-input">
                                                    <option value="camera">Camera</option>
                                                    <option value="screen">Screen Share</option>
                                                    <option value="external">External Encoder</option>
                                                    <option value="program">Preview/Program</option>
                                                </select>
                                            </div>
                                            <div class="encoder-panel subtle-panel is-hidden"
                                                id="external-encoder-panel" aria-live="polite">
                                                <div class="encoder-row">
                                                    <div>
                                                        <div class="gl-label">Ingest Server</div>
                                                        <div class="muted" id="external-ingest-url">‚Äî</div>
                                                    </div>
                                                </div>
                                                <div class="encoder-row">
                                                    <div class="encoder-key">
                                                        <div class="gl-label">Stream Key</div>
                                                        <input class="form-input" type="password"
                                                            id="external-stream-key" readonly value="">
                                                    </div>
                                                    <div class="encoder-key-actions">
                                                        <button class="icon-pill ghost" type="button"
                                                            id="toggle-stream-key">Show</button>
                                                        <button class="icon-pill ghost" type="button"
                                                            id="copy-stream-key">Copy</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="helper-link-row">
                                                <button class="text-link" type="button" id="go-advanced-external">Use
                                                    OBS / External encoder
                                                    (Advanced)</button>
                                            </div>
                                            <div id="obs-panel-slot-basic">
                                                <div id="obs-panel" class="obs-panel">
                                                    <div class="obs-panel-title">OBS / External encoder</div>
                                                    <p class="helper-text">Point your encoder here when using RTMP.
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="config-section">
                                        <div class="section-heading">Visibility</div>
                                        <p class="helper-text">Choose who can watch your stream.</p>
                                        <div class="pill-row">
                                            <button class="ghost-pill active" type="button" id="basic-visibility-public"
                                                data-go-live-visibility="public">Public</button>
                                            <button class="ghost-pill" type="button" id="basic-visibility-private"
                                                data-go-live-visibility="private">Private</button>
                                        </div>
                                    </div>
                                    <div class="config-section basic-latency-section">
                                        <div class="section-heading">Latency</div>
                                        <p class="helper-text">Lower latency reduces delay with your viewers but can
                                            be less forgiving on unstable connections.</p>
                                        <div class="gl-field">
                                            <label class="gl-label" for="latency-mode">Latency profile</label>
                                            <select id="latency-mode" class="form-input">
                                                <option value="NORMAL">Normal</option>
                                                <option value="LOW">Low Latency</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="config-section basic-recording-section">
                                        <div class="section-heading">Recording</div>
                                        <p class="helper-text">Automatically capture your broadcast for replay while
                                            you stream.</p>
                                        <div class="gl-row align-center">
                                            <div class="gl-label">Auto-record</div>
                                            <label class="switch" aria-label="Toggle auto recording">
                                                <input type="checkbox" id="auto-record-toggle">
                                                <span class="slider"></span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="config-section">
                                        <div class="section-heading">Controls</div>
                                        <div class="status-helper" id="go-live-status-text-secondary">Ready to
                                            preview.</div>
                                        <div class="control-row">
                                            <button class="create-btn-sidebar primary go-live-action-btn"
                                                id="start-stream">Start Stream</button>
                                            <button class="icon-pill destructive go-live-action-btn" id="end-stream"
                                                disabled>End Stream</button>
                                        </div>
                                        <div class="troubleshooting">
                                            <div class="troubleshooting-title">Troubleshooting</div>
                                            <ul>
                                                <li>Check mic permissions</li>
                                                <li>Check screen share permissions</li>
                                                <li>Try reloading</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                    </div>

                    <div class="gl-panel basic-dock" id="basic-dock">
                        <div class="basic-dock-tabs" role="tablist">
                            <button class="basic-dock-tab is-active" data-dock-tab="dock-logs" aria-selected="true"
                                type="button">Stream Logs</button>
                            <button class="basic-dock-tab" data-dock-tab="dock-chat" aria-selected="false"
                                type="button">Chat Logs</button>
                            <button class="basic-dock-tab" data-dock-tab="dock-status" aria-selected="false"
                                type="button">Stream Status</button>
                            <button class="basic-dock-tab" data-dock-tab="dock-session" aria-selected="false"
                                type="button">Live Session</button>
                            <button class="basic-dock-tab" data-dock-tab="dock-encoder" aria-selected="false"
                                type="button">Encoder</button>
                            <button class="basic-dock-tab" data-dock-tab="dock-events" aria-selected="false"
                                type="button">Stream Events</button>
                        </div>
                        <div class="basic-dock-body">
                            <section class="basic-dock-panel is-active" id="dock-logs" role="tabpanel"
                                aria-hidden="false">
                                <div class="gl-row align-center" style="justify-content: space-between;">
                                    <div class="section-heading">Stream Logs</div>
                                    <button class="icon-pill ghost" id="clear-log-dock"><i class="ph ph-trash"></i>
                                        Clear</button>
                                </div>
                                <pre class="log-feed" id="go-live-log-dock"></pre>
                        </div>
                        </section>
                        <section class="basic-dock-panel" id="dock-chat" role="tabpanel" aria-hidden="true">
                            <div class="section-heading">Chat Logs</div>
                            <div class="log-feed" id="chat-log-feed"></div>
                        </section>
                        <section class="basic-dock-panel" id="dock-status" role="tabpanel" aria-hidden="true">
                            <div class="section-heading">Stream Status</div>
                            <div class="status-grid">
                                <div>
                                    <div class="gl-label muted">State</div>
                                    <div id="dock-stream-state">Idle</div>
                                </div>
                                <div>
                                    <div class="gl-label muted">Input Mode</div>
                                    <div id="dock-stream-input">Camera</div>
                                </div>
                                <div>
                                    <div class="gl-label muted">Latency</div>
                                    <div id="dock-stream-latency">Normal</div>
                                </div>
                                <div>
                                    <div class="gl-label muted">Metrics</div>
                                    <div class="muted" id="dock-stream-metrics">No stats yet.</div>
                                </div>
                            </div>
                        </section>
                        <section class="basic-dock-panel" id="dock-session" role="tabpanel" aria-hidden="true">
                            <div class="section-heading">Live Session</div>
                            <div class="session-grid compact">
                                <div class="session-row"><span class="muted">Session ID</span><span
                                        id="dock-session-id">‚Äî</span></div>
                                <div class="session-row"><span class="muted">Channel ARN</span><span
                                        id="dock-session-arn">‚Äî</span></div>
                                <div class="session-row"><span class="muted">Ingest</span><span id="dock-session-ingest"
                                        class="muted">‚Äî</span></div>
                                <div class="session-row"><span class="muted">Playback</span><span
                                        id="dock-session-playback" class="muted">‚Äî</span></div>
                                <div class="session-row"><span class="muted">Latency</span><span
                                        id="dock-session-latency" class="muted">‚Äî</span></div>
                                <div class="session-row"><span class="muted">Mode</span><span id="dock-session-mode"
                                        class="muted">‚Äî</span></div>
                            </div>
                        </section>
                        <section class="basic-dock-panel" id="dock-encoder" role="tabpanel" aria-hidden="true">
                            <div class="section-heading">Encoder</div>
                            <div class="encoder-panel subtle-panel" id="dock-encoder-panel">
                                <div class="encoder-row">
                                    <div>
                                        <div class="gl-label">Ingest Server</div>
                                        <div class="muted" id="dock-encoder-ingest">Select External Encoder to view
                                            details.</div>
                                    </div>
                                </div>
                                <div class="encoder-row">
                                    <div class="encoder-key">
                                        <div class="gl-label">Stream Key</div>
                                        <input class="form-input" type="password" id="dock-encoder-key" readonly
                                            value="">
                                    </div>
                                    <div class="encoder-key-actions">
                                        <button class="icon-pill ghost" type="button"
                                            id="dock-toggle-stream-key">Show</button>
                                        <button class="icon-pill ghost" type="button"
                                            id="dock-copy-stream-key">Copy</button>
                                    </div>
                                </div>
                            </div>
                        </section>
                        <section class="basic-dock-panel" id="dock-events" role="tabpanel" aria-hidden="true">
                            <div class="section-heading">Stream Events</div>
                            <div class="log-feed" id="stream-events-log"></div>
                        </section>
                    </div>
                </div>
                </section>
                <section id="go-live-advanced-view" class="go-live-view">
                    <div class="advanced-layout">
                        <div class="gl-panel advanced-card program-card advanced-stage">
                            <div class="program-grid">
                                <div class="monitor preview-monitor">
                                    <div class="monitor-label">PREVIEW <span class="scene-pill"
                                            id="preview-scene-label">Scene 1</span><span
                                            class="scene-pill monitor-badge" id="preview-source-label">Source</span>
                                    </div>
                                    <div class="monitor-body" id="live-preview-slot-advanced"></div>
                                </div>
                                <div class="monitor program-monitor">
                                    <div class="monitor-label">PROGRAM <span class="scene-pill"
                                            id="program-scene-label">Scene 1</span><span
                                            class="scene-pill monitor-badge" id="program-source-label">Source</span>
                                    </div>
                                    <div class="monitor-body program-body" id="program-monitor-body">
                                        <video id="program-output" autoplay muted playsinline></video>
                                    </div>
                                </div>
                            </div>
                            <div class="program-meta">
                                <div class="live-indicator" id="program-live-indicator"><span
                                        id="program-live-label">Idle</span></div>
                                <div class="program-timer" id="program-timer">00:00:00</div>
                                <div class="program-notes" id="program-notes">Program/preview monitors ready for
                                    switching.</div>
                            </div>
                            <div class="transition-strip">
                                <div class="transition-buttons">
                                    <button class="icon-pill ghost" type="button" id="transition-cut">Cut</button>
                                    <button class="icon-pill ghost" type="button" id="transition-fade">Fade</button>
                                    <button class="icon-pill ghost" type="button" id="transition-auto">Auto</button>
                                </div>
                                <div class="transition-duration">Transition duration: 1.5s</div>
                            </div>
                        </div>
                        <div class="advanced-main-grid">
                            <div class="gl-panel advanced-card scenes-panel advanced-grid-scenes">
                                <div class="gl-panel-header">
                                    <div class="section-heading">Scenes</div>
                                </div>
                                <div class="scene-search">
                                    <input class="form-input" type="text" placeholder="Search scenes">
                                </div>
                                <div class="scene-list" id="scene-list"></div>
                                <div class="scene-actions-row">
                                    <button class="icon-pill ghost" type="button" id="add-scene-btn"><i
                                            class="ph ph-plus"></i>Add</button>
                                    <button class="icon-pill ghost" type="button" id="remove-scene-btn"><i
                                            class="ph ph-minus"></i> Remove</button>
                                </div>
                            </div>
                            <div class="gl-panel advanced-card mixer-card advanced-grid-mixer">
                                <div class="gl-panel-header">
                                    <div class="section-heading">Audio Mixer</div>
                                </div>
                                <div class="panel-body mixer-body">
                                    <div class="mixer-grid">
                                        <div class="mixer-strip" data-channel="mic">
                                            <div class="mixer-title">Mic</div>
                                            <div class="meter"><span class="meter-fill"></span></div>
                                            <input type="range" min="0" max="100" value="100" class="mixer-fader"
                                                id="mixer-mic-fader" data-channel="mic">
                                            <div class="mixer-actions">
                                                <button class="icon-pill ghost mixer-mute" type="button"
                                                    data-channel="mic">Mute</button>
                                            </div>
                                        </div>
                                        <div class="mixer-strip" data-channel="system">
                                            <div class="mixer-title">System</div>
                                            <div class="meter"><span class="meter-fill"></span></div>
                                            <input type="range" min="0" max="100" value="100" class="mixer-fader"
                                                id="mixer-system-fader" data-channel="system">
                                            <div class="mixer-actions">
                                                <button class="icon-pill ghost mixer-mute" type="button"
                                                    data-channel="system">Mute</button>
                                            </div>
                                        </div>
                                        <div class="mixer-strip" data-channel="music">
                                            <div class="mixer-title">Music</div>
                                            <div class="meter"><span class="meter-fill"></span></div>
                                            <input type="range" min="0" max="100" value="70" class="mixer-fader"
                                                id="mixer-music-fader" data-channel="music">
                                            <div class="mixer-actions">
                                                <button class="icon-pill ghost mixer-mute" type="button"
                                                    data-channel="music">Mute</button>
                                            </div>
                                        </div>
                                        <div class="mixer-strip" data-channel="aux">
                                            <div class="mixer-title">Aux</div>
                                            <div class="meter"><span class="meter-fill"></span></div>
                                            <input type="range" min="0" max="100" value="70" class="mixer-fader"
                                                id="mixer-aux-fader" data-channel="aux">
                                            <div class="mixer-actions">
                                                <button class="icon-pill ghost mixer-mute" type="button"
                                                    data-channel="aux">Mute</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="gl-panel advanced-card sources-panel advanced-grid-sources">
                                <div class="gl-panel-header">
                                    <div class="section-heading">Sources</div>
                                </div>
                                <div class="source-list" id="source-list"></div>
                                <div class="source-actions-row">
                                    <button class="icon-pill ghost" type="button" id="add-source-btn"><i
                                            class="ph ph-plus"></i> Add</button>
                                    <button class="icon-pill ghost" type="button" id="remove-source-btn"><i
                                            class="ph ph-minus"></i> Remove</button>
                                </div>
                            </div>
                            <div class="gl-panel advanced-card stats-card advanced-grid-stats">
                                <div class="gl-panel-header">
                                    <div class="section-heading">Stream Stats</div>
                                </div>
                                <div class="stats-grid">
                                    <div class="stat-row"><span>Ingest</span><span class="muted"
                                            id="adv-stat-ingest">‚Äî</span></div>
                                    <div class="stat-row"><span>Bitrate</span><span class="muted"
                                            id="adv-stat-bitrate">‚Äî</span></div>
                                    <div class="stat-row"><span>RTT</span><span class="muted" id="adv-stat-rtt">‚Äî</span>
                                    </div>
                                    <div class="stat-row"><span>Dropped Frames</span><span class="muted"
                                            id="adv-stat-dropped">‚Äî</span></div>
                                    <div class="stat-row"><span>CPU</span><span class="muted" id="adv-stat-cpu">‚Äî</span>
                                    </div>
                                    <div class="stat-row"><span>Duration</span><span class="muted"
                                            id="adv-stat-duration">00:00:00</span></div>
                                    <div class="stat-row"><span>Tracks</span><span class="muted"
                                            id="adv-stat-tracks">‚Äî</span></div>
                                    <div class="stat-row"><span>Input</span><span class="muted"
                                            id="adv-stat-mode">‚Äî</span>
                                    </div>
                                    <div class="stat-row"><span>Health</span><span class="muted"
                                            id="adv-stat-health">Monitoring</span></div>
                                </div>
                            </div>
                            <div class="gl-panel advanced-card advanced-config advanced-grid-controls">
                                <div class="gl-panel-header">
                                    <div class="section-heading">Stream Controls</div>
                                    <div class="status-helper" id="go-live-status-text-secondary-adv">Manage settings
                                        before going live.</div>
                                </div>
                                <div class="advanced-controls-list">
                                    <div class="gl-field">
                                        <label class="gl-label" for="adv-stream-title">Title</label>
                                        <input id="adv-stream-title" class="form-input" placeholder="Name your stream">
                                    </div>
                                    <div class="gl-field">
                                        <label class="gl-label" for="adv-stream-category">Topic</label>
                                        <input id="adv-stream-category" class="form-input"
                                            placeholder="Gaming, IRL, Podcast...">
                                    </div>
                                    <div class="gl-field">
                                        <label class="gl-label" for="adv-stream-tags">Tags</label>
                                        <input id="adv-stream-tags" class="form-input"
                                            placeholder="Add tags separated by commas">
                                    </div>
                                    <div class="gl-field">
                                        <label class="gl-label" for="adv-input-mode">Input mode</label>
                                        <select id="adv-input-mode" class="form-input">
                                            <option value="camera">Camera</option>
                                            <option value="screen">Screen Share</option>
                                            <option value="external">External Encoder</option>
                                            <option value="program">Preview/Program</option>
                                        </select>
                                    </div>
                                    <div class="gl-field">
                                        <label class="gl-label" for="adv-latency-mode">Latency profile</label>
                                        <select id="adv-latency-mode" class="form-input">
                                            <option value="NORMAL">Normal</option>
                                            <option value="LOW">Low Latency</option>
                                        </select>
                                    </div>
                                    <div class="gl-row align-center">
                                        <div class="gl-label">Auto-record</div>
                                        <label class="switch" aria-label="Toggle auto recording in advanced view">
                                            <input type="checkbox" id="adv-auto-record">
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                    <div class="gl-field">
                                        <label class="gl-label">Visibility</label>
                                        <div class="pill-row">
                                            <button class="ghost-pill active" type="button" id="adv-visibility-public"
                                                data-go-live-visibility="public">Public</button>
                                            <button class="ghost-pill" type="button" id="adv-visibility-followers"
                                                data-go-live-visibility="followers">Followers only</button>
                                            <button class="ghost-pill" type="button" id="adv-visibility-unlisted"
                                                data-go-live-visibility="unlisted">Unlisted</button>
                                        </div>
                                    </div>
                                    <div class="control-row">
                                        <button class="create-btn-sidebar primary" id="adv-start-stream">Start
                                            Stream</button>
                                        <button class="icon-pill destructive" id="adv-end-stream" disabled>End
                                            Stream</button>
                                    </div>
                                </div>
                            </div>
                            <div class="gl-panel advanced-card session-card advanced-grid-session">
                                <div class="gl-panel-header">
                                    <div class="section-heading">Live Session</div>
                                </div>
                                <div class="panel-body session-body">
                                    <div class="session-grid compact">
                                        <div class="session-row"><span class="muted">Session ID</span><span
                                                id="session-id-advanced">‚Äî</span></div>
                                        <div class="session-row"><span class="muted">Channel ARN</span><span
                                                id="session-arn-advanced">‚Äî</span></div>
                                        <div class="session-row"><span class="muted">Ingest</span><span
                                                id="session-ingest-advanced" class="muted">‚Äî</span></div>
                                        <div class="session-row"><span class="muted">Playback</span><span
                                                id="session-playback-advanced" class="muted">‚Äî</span></div>
                                        <div class="session-row"><span class="muted">Latency</span><span
                                                id="session-latency-advanced" class="muted">‚Äî</span></div>
                                        <div class="session-row"><span class="muted">Mode</span><span
                                                id="session-mode-advanced" class="muted">‚Äî</span></div>
                                    </div>
                                    <div class="obs-slot subtle-panel" id="obs-panel-advanced" aria-live="polite">OBS
                                        ingest coordinates will appear here.</div>
                                </div>
                            </div>
                            <div class="gl-panel advanced-card advanced-tabs advanced-grid-tabs"
                                id="advanced-tabs-gl-pane">
                                <div class="tab-row" role="tablist">
                                    <button class="tab active" data-tab-group="advanced-tabs" data-tab-target="logs"
                                        aria-selected="true" role="tab">Logs</button>
                                    <button class="tab" data-tab-group="advanced-tabs" data-tab-target="chat"
                                        aria-selected="false" role="tab">Chat</button>
                                    <button class="tab" data-tab-group="advanced-tabs" data-tab-target="events"
                                        aria-selected="false" role="tab">Stream Events</button>
                                    <button class="tab" data-tab-group="advanced-tabs" data-tab-target="encoder"
                                        aria-selected="false" role="tab">Encoder</button>
                                </div>
                                <div class="tab-panels">
                                    <div class="tab-panel show" data-tab-group="advanced-tabs" data-tab-panel="logs"
                                        role="tabpanel">
                                        <div class="gl-row align-center" style="justify-content: space-between;">
                                            <div class="section-heading">Live Logs</div>
                                            <button class="icon-pill ghost" id="clear-log"><i class="ph ph-trash"></i>
                                                Clear</button>
                                        </div>
                                        <pre class="log-feed" id="go-live-log"></pre>
                                    </div>
                                    <div class="tab-panel" data-tab-group="advanced-tabs" data-tab-panel="chat"
                                        role="tabpanel" aria-hidden="true" hidden>
                                        <div class="section-heading">Stream Chat</div>
                                        <div class="placeholder-block">Chat integration coming soon.</div>
                                    </div>
                                    <div class="tab-panel" data-tab-group="advanced-tabs" data-tab-panel="events"
                                        role="tabpanel" aria-hidden="true" hidden>
                                        <div class="section-heading">Events</div>
                                        <div class="placeholder-block">Stream events will appear here.</div>
                                    </div>
                                    <div class="tab-panel" data-tab-group="advanced-tabs" data-tab-panel="encoder"
                                        role="tabpanel" aria-hidden="true" hidden>
                                        <div class="section-heading">Encoder</div>
                                        <div class="placeholder-block" id="encoder-tab-placeholder">Encoder
                                            configuration placeholder.</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
    </div>
    </div>


    </main>

    <aside class="sidebar-right glass-panel no-scrollbar">
        <div class="right-sidebar-header">
            <div class="feed-type-toggle-header">Feed Filters</div>
            <div class="feed-type-toggle-bar" id="feed-type-toggle-bar"></div>
        </div>
        <div class="right-sidebar-content">
        <div id="stories-live-bar-slot" class="stories-live-bar-slot"></div>
        <div class="trend-box trending-topics">
            <div class="trend-title trend-header">
                <span><i class="ph-fill ph-trend-up"></i> Trending Topics</span>
                <select id="trending-range-select" class="trend-range-select" aria-label="Trending range">
                    <option value="day">1d</option>
                    <option value="week" selected>7d</option>
                    <option value="month">1mo</option>
                    <option value="six_months">6mo</option>
                    <option value="year">1y</option>
                    <option value="five_years">5y</option>
                    <option value="lifetime">All</option>
                </select>
            </div>
            <div class="trend-list" id="trending-topic-list"></div>
        </div>

        <div class="trend-box">
            <div class="trend-title time-capsule-header">
                <span><i class="ph-fill ph-hourglass"></i> Time Capsule</span>
            </div>
            <div class="otd-widget">
                <div class="otd-date" id="otd-date-display">...</div>
                <div class="otd-event" id="otd-event-display">Loading history...</div>
                <div class="otd-actions">
                    <button class="icon-pill" id="otd-refresh-btn" onclick="window.showAnotherTimeCapsuleEvent()"
                        aria-label="Load another event">
                        <i class="ph ph-arrows-clockwise"></i> New one
                    </button>
                    <a id="otd-wiki-link" class="icon-pill otd-source" style="display:none;"
                        aria-label="Learn more about this event">
                        <i class="ph ph-book-open"></i> Learn More
                    </a>
                </div>
                <div class="time-capsule-footer"><a class="wiki-attribution" href="https://www.wikipedia.org"
                        target="_blank" rel="noopener noreferrer">Powered by Wikipedia</a></div>
            </div>
        </div>

        <div style="margin-top:2rem; font-size:0.8rem; color:var(--text-muted);">¬© 2025 Nexera Network</div>
        </div>
    </aside>
    </div>

    <div id="sidebar-backdrop" class="sidebar-backdrop" onclick="window.Nexera?.closeSidebar?.()"></div>

    <nav id="mobile-bottom-nav" class="mobile-bottom-nav">
        <button class="mobile-nav-btn active" data-view="feed"><i class="ph ph-house"></i><span>Home</span></button>
        <button class="mobile-nav-btn" data-view="discover"><i class="ph ph-compass"></i><span>Explore</span></button>
        <button class="mobile-nav-btn" data-view="live"><i class="ph ph-broadcast"></i><span>Go Live</span></button>
        <button class="mobile-nav-btn" data-view="messages"><i class="ph ph-chats"></i><span>Chats</span></button>
        <button class="mobile-nav-btn" data-view="profile"><i class="ph ph-user"></i><span>Profile</span></button>
    </nav>

    <div id="mobile-action-sheet" class="mobile-action-sheet" role="dialog" aria-modal="true">
        <div class="mobile-sheet-backdrop" onclick="window.closeMobileActionSheet()"></div>
        <div class="mobile-sheet-body">
            <div class="mobile-sheet-handle"></div>
            <button class="sheet-action" onclick="window.openMobileComposer()"><i class="ph ph-pencil"></i> Create
                Post</button>
            <button class="sheet-action" onclick="window.closeMobileActionSheet(); window.openGoLiveSetupPage()"><i
                    class="ph ph-broadcast"></i> Go Live</button>
            <button class="sheet-action"
                onclick="window.closeMobileActionSheet(); window.toggleVideoUploadModal(true)"><i
                    class="ph ph-film-strip"></i> Upload Video</button>
        </div>
    </div>

    <div id="mobile-composer-sheet" class="mobile-composer-sheet" role="dialog" aria-modal="true">
        <div class="mobile-sheet-header">
            <button class="sheet-link" onclick="window.closeMobileComposer()">Cancel</button>
            <div class="sheet-title">New Post</div>
            <button id="mobile-compose-submit" class="sheet-link primary" onclick="window.triggerComposerPost()"
                disabled>Post</button>
        </div>
        <div class="mobile-sheet-content">
            <textarea id="mobile-compose-input" rows="4" placeholder="What's happening?"
                oninput="window.syncMobileComposerState()"></textarea>
            <div class="mobile-attachment-row">
                <button class="icon-btn" type="button"><i class="ph ph-image"></i></button>
                <button class="icon-btn" type="button"><i class="ph ph-microphone"></i></button>
                <button class="icon-btn" type="button"><i class="ph ph-paperclip"></i></button>
            </div>
        </div>
    </div>

    <!-- Splash Screen -->
    <div id="nexera-splash" aria-hidden="true">
        <div class="nexera-splash-center">
            <img class="nexera-splash-logo"
                src="https://firebasestorage.googleapis.com/v0/b/spike-streaming-service.firebasestorage.app/o/apps%2Fnexera%2Fassets%2Ficons%2Fwhiteicon.png?alt=media&token=366d09a9-61f6-4096-af08-a01a119c339e"
                alt="Nexera">
            <div class="splash-spinner" aria-hidden="true"></div>
        </div>
    </div>

    <div id="video-mini-player" class="video-mini-player" style="display:none;">
        <div class="video-mini-player-header" data-mini-drag>
            <span>Now Playing</span>
            <button type="button" class="video-mini-player-close" onclick="window.closeMiniPlayer()">√ó</button>
        </div>
        <video id="video-mini-player-video" controls playsinline></video>
    </div>

    <!-- Main JS logic -->
    <script src="/assets/js/bootstrap.js"></script>
    <script type="module" src="/main.js"></script>
    <script type="module" src="/assets/js/router.js"></script>

</body>

</html>
